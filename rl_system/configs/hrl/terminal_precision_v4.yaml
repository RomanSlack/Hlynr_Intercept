# Terminal Specialist PRECISION Training v4
# OBJECTIVE: Train terminal specialist for sub-30m precision (realistic fragmentation warhead)
#
# KEY CHANGES from v3:
# - Tighter curriculum: 50m -> 20m (was 100m -> 50m)
# - Longer training: 4M steps (was 2M)
# - Resume from v3 checkpoint to leverage existing approach behavior
#
# Real-world context:
# - Hit-to-kill (kinetic): 0-2m needed
# - Proximity fuze fragmentation: 5-30m needed
# - Blast fragmentation: 10-50m needed
# We're targeting fragmentation-class precision (~20-30m)

# Inherit base settings
parent_config: ../../config.yaml

# Specialist-specific training
training:
  total_timesteps: 4000000  # 4M steps for precision refinement
  n_envs: 12
  n_steps: 2048
  batch_size: 512
  use_subproc: false  # DummyVecEnv + GPU is faster

  # Standard learning rate
  learning_rate: 0.0003
  gamma: 0.99
  gae_lambda: 0.95

  # Moderate entropy for exploration
  ent_coef: 0.01

  # LSTM ENABLED - critical for terminal phase trajectory prediction
  use_lstm: true
  lstm_hidden_dim: 128

  # Network architecture
  net_arch: [256, 256]
  use_layer_norm: true
  use_orthogonal_init: true

  # Frame stacking
  frame_stack: 4

  # Evaluation settings
  eval_freq: 25000
  n_eval_episodes: 20
  checkpoint_freq: 100000

# TIGHTER PRECISION CURRICULUM: 50m -> 20m over 4M steps
curriculum:
  enabled: true
  initial_radius: 50.0    # Start where v3 was targeting
  final_radius: 20.0      # Target: realistic fragmentation warhead range
  curriculum_steps: 4000000

  # Progression:
  # Step 0:        50m
  # Step 1M:       42.5m
  # Step 2M:       35m
  # Step 3M:       27.5m
  # Step 4M:       20m

# Environment
environment:
  max_steps: 2000
